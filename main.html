<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="styles/Styles.css" rel="stylesheet">
    <title>AppMacrosRewards</title>
</head>
<body>
    <div class="contenedor">
        <div class="navBar">
            <nav class="navbar">
                <ul>
                    <li><a href="inicio.html">Inicio</a></li>
                    <li><a href="Macros.html">Macros</a></li>
                    <li><a href="">Proximamente</a></li>
                </ul>
            </nav>
        </div>
        <div class="Content">
          <div class="MainPage">    
            <h1 class="Title">Pantalla Principal Macro</h1>
            <h2 class="Descp">Aqui solo se muestra el boton para iniciar la accion</h2>
            <button onclick="activarMacro()">Prueba Script</button>
        </div>
          <div class="footer"></div>
        </div>
      </div>

    <script>
        async function activarMacro() {
            try {
                console.log("Leyendo archivo ngrok_url.txt...");
                const ngrokUrl = await fetch('./ngrok_url.txt').then(response => response.text());
                console.log("URL de ngrok obtenida:", ngrokUrl);
        
                // Usar la variable ngrokUrl para construir la URL completa para el fetch
                const response = await fetch(ngrokUrl + '/macro', { method: 'POST' });
        
                if (response.ok) {
                    alert("La macro se ejecut√≥ correctamente.");
                } else {
                    alert("Hubo un error al ejecutar la macro.");
                }
            } catch (error) {
                console.error("Error al obtener la URL o ejecutar la macro:", error);
                alert("Error al obtener la URL de ngrok o ejecutar la macro.");
            }
        }
        
    </script>
</body>
</html>